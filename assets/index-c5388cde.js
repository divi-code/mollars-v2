import{J as un,G as V,D as se,y as et,O as fn,l as k,r as Be,f as cn,j as ln,b as dn,S as hn,K as vn,n as _n}from"./misc-d9782c74.js";import{s as pn,n as it}from"./severity-479b6ab4.js";import{c as me}from"./index-7bb53421.js";function ge(E){throw new Error('Could not dynamically require "'+E+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function mn(E,r){let a=0;for(let u=E.length-1;u>=0;u--){const l=E[u];l==="."?E.splice(u,1):l===".."?(E.splice(u,1),a++):a&&(E.splice(u,1),a--)}if(r)for(;a--;a)E.unshift("..");return E}const gn=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function yn(E){const r=gn.exec(E);return r?r.slice(1):[]}function tt(...E){let r="",a=!1;for(let u=E.length-1;u>=-1&&!a;u--){const l=u>=0?E[u]:"/";l&&(r=`${l}/${r}`,a=l.charAt(0)==="/")}return r=mn(r.split("/").filter(u=>!!u),!a).join("/"),(a?"/":"")+r||"."}function nt(E){let r=0;for(;r<E.length&&E[r]==="";r++);let a=E.length-1;for(;a>=0&&E[a]==="";a--);return r>a?[]:E.slice(r,a-r+1)}function bn(E,r){E=tt(E).slice(1),r=tt(r).slice(1);const a=nt(E.split("/")),u=nt(r.split("/")),l=Math.min(a.length,u.length);let _=l;for(let y=0;y<l;y++)if(a[y]!==u[y]){_=y;break}let g=[];for(let y=_;y<a.length;y++)g.push("..");return g=g.concat(u.slice(_)),g.join("/")}function En(E,r){let a=yn(E)[2];return r&&a.slice(r.length*-1)===r&&(a=a.slice(0,a.length-r.length)),a}class ne{static __initStatic(){this.id="CaptureConsole"}__init(){this.name=ne.id}__init2(){this._levels=un}constructor(r={}){ne.prototype.__init.call(this),ne.prototype.__init2.call(this),r.levels&&(this._levels=r.levels)}setupOnce(r,a){"console"in V&&this._levels.forEach(u=>{u in V.console&&se(V.console,u,l=>(..._)=>{const g=a();g.getIntegration(ne)&&g.withScope(y=>{y.setLevel(pn(u)),y.setExtra("arguments",_),y.addEventProcessor(x=>(x.logger="console",x));let w=et(_," ");u==="assert"?_[0]===!1&&(w=`Assertion failed: ${et(_.slice(1)," ")||"console.assert"}`,y.setExtra("arguments",_.slice(1)),g.captureMessage(w)):u==="error"&&_[0]instanceof Error?g.captureException(_[0]):g.captureMessage(w)}),l&&l.apply(V.console,_)})})}}ne.__initStatic();class ue{static __initStatic(){this.id="Debug"}__init(){this.name=ue.id}constructor(r){ue.prototype.__init.call(this),this._options={debugger:!1,stringify:!1,...r}}setupOnce(r,a){r((u,l)=>{const _=a().getIntegration(ue);if(_){if(_._options.debugger)debugger;fn(()=>{_._options.stringify?(console.log(JSON.stringify(u,null,2)),Object.keys(l).length&&console.log(JSON.stringify(l,null,2))):(console.log(u),Object.keys(l).length&&console.log(l))})}return u})}}ue.__initStatic();class fe{constructor(){fe.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=fe.id}setupOnce(r,a){const u=l=>{const _=a().getIntegration(fe);if(_){try{if(Sn(l,_._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return _._previousEvent=l}return _._previousEvent=l}return l};u.id=this.name,r(u)}}fe.__initStatic();function Sn(E,r){return r?!!(Rn(E,r)||wn(E,r)):!1}function Rn(E,r){const a=E.message,u=r.message;return!(!a&&!u||a&&!u||!a&&u||a!==u||!st(E,r)||!at(E,r))}function wn(E,r){const a=rt(r),u=rt(E);return!(!a||!u||a.type!==u.type||a.value!==u.value||!st(E,r)||!at(E,r))}function at(E,r){let a=ot(E),u=ot(r);if(!a&&!u)return!0;if(a&&!u||!a&&u||(a=a,u=u,u.length!==a.length))return!1;for(let l=0;l<u.length;l++){const _=u[l],g=a[l];if(_.filename!==g.filename||_.lineno!==g.lineno||_.colno!==g.colno||_.function!==g.function)return!1}return!0}function st(E,r){let a=E.fingerprint,u=r.fingerprint;if(!a&&!u)return!0;if(a&&!u||!a&&u)return!1;a=a,u=u;try{return a.join("")===u.join("")}catch{return!1}}function rt(E){return E.exception&&E.exception.values&&E.exception.values[0]}function ot(E){const r=E.exception;if(r)try{return r.values[0].stacktrace.frames}catch{return}}class ce{static __initStatic(){this.id="ExtraErrorData"}__init(){this.name=ce.id}constructor(r){ce.prototype.__init.call(this),this._options={depth:3,...r}}setupOnce(r,a){r((u,l)=>{const _=a().getIntegration(ce);return _?_.enhanceEventWithErrorData(u,l):u})}enhanceEventWithErrorData(r,a={}){if(!a.originalException||!Be(a.originalException))return r;const u=a.originalException.name||a.originalException.constructor.name,l=this._extractErrorData(a.originalException);if(l){const _={...r.contexts},g=it(l,this._options.depth);return cn(g)&&(ln(g,"__sentry_skip_normalization__",!0),_[u]=g),{...r,contexts:_}}return r}_extractErrorData(r){try{const a=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],u={};for(const l of Object.keys(r)){if(a.indexOf(l)!==-1)continue;const _=r[l];u[l]=Be(_)?_.toString():_}if(typeof r.toJSON=="function"){const l=r.toJSON();for(const _ of Object.keys(l)){const g=l[_];u[_]=Be(g)?g.toString():g}}return u}catch(a){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.error("Unable to extract extra data from the Error object:",a)}return null}}ce.__initStatic();var Ce={},In={get exports(){return Ce},set exports(E){Ce=E}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(E,r){(function(a){E.exports=a()})(function(){return function a(u,l,_){function g(x,Y){if(!l[x]){if(!u[x]){var p=typeof ge=="function"&&ge;if(!Y&&p)return p(x,!0);if(y)return y(x,!0);var S=new Error("Cannot find module '"+x+"'");throw S.code="MODULE_NOT_FOUND",S}var B=l[x]={exports:{}};u[x][0].call(B.exports,function(C){var H=u[x][1][C];return g(H||C)},B,B.exports,a,u,l,_)}return l[x].exports}for(var y=typeof ge=="function"&&ge,w=0;w<_.length;w++)g(_[w]);return g}({1:[function(a,u,l){(function(_){var g=_.MutationObserver||_.WebKitMutationObserver,y;if(g){var w=0,x=new g(C),Y=_.document.createTextNode("");x.observe(Y,{characterData:!0}),y=function(){Y.data=w=++w%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var p=new _.MessageChannel;p.port1.onmessage=C,y=function(){p.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?y=function(){var P=_.document.createElement("script");P.onreadystatechange=function(){C(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},_.document.documentElement.appendChild(P)}:y=function(){setTimeout(C,0)};var S,B=[];function C(){S=!0;for(var P,W,U=B.length;U;){for(W=B,B=[],P=-1;++P<U;)W[P]();U=B.length}S=!1}u.exports=H;function H(P){B.push(P)===1&&!S&&y()}}).call(this,typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(a,u,l){var _=a(1);function g(){}var y={},w=["REJECTED"],x=["FULFILLED"],Y=["PENDING"];u.exports=p;function p(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=Y,this.queue=[],this.outcome=void 0,m!==g&&H(this,m)}p.prototype.catch=function(m){return this.then(null,m)},p.prototype.then=function(m,N){if(typeof m!="function"&&this.state===x||typeof N!="function"&&this.state===w)return this;var I=new this.constructor(g);if(this.state!==Y){var A=this.state===x?m:N;B(I,A,this.outcome)}else this.queue.push(new S(I,m,N));return I};function S(m,N,I){this.promise=m,typeof N=="function"&&(this.onFulfilled=N,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(m){y.resolve(this.promise,m)},S.prototype.otherCallFulfilled=function(m){B(this.promise,this.onFulfilled,m)},S.prototype.callRejected=function(m){y.reject(this.promise,m)},S.prototype.otherCallRejected=function(m){B(this.promise,this.onRejected,m)};function B(m,N,I){_(function(){var A;try{A=N(I)}catch(F){return y.reject(m,F)}A===m?y.reject(m,new TypeError("Cannot resolve promise with itself")):y.resolve(m,A)})}y.resolve=function(m,N){var I=P(C,N);if(I.status==="error")return y.reject(m,I.value);var A=I.value;if(A)H(m,A);else{m.state=x,m.outcome=N;for(var F=-1,M=m.queue.length;++F<M;)m.queue[F].callFulfilled(N)}return m},y.reject=function(m,N){m.state=w,m.outcome=N;for(var I=-1,A=m.queue.length;++I<A;)m.queue[I].callRejected(N);return m};function C(m){var N=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof N=="function")return function(){N.apply(m,arguments)}}function H(m,N){var I=!1;function A($){I||(I=!0,y.reject(m,$))}function F($){I||(I=!0,y.resolve(m,$))}function M(){N(F,A)}var G=P(M);G.status==="error"&&A(G.value)}function P(m,N){var I={};try{I.value=m(N),I.status="success"}catch(A){I.status="error",I.value=A}return I}p.resolve=W;function W(m){return m instanceof this?m:y.resolve(new this(g),m)}p.reject=U;function U(m){var N=new this(g);return y.reject(N,m)}p.all=be;function be(m){var N=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,A=!1;if(!I)return this.resolve([]);for(var F=new Array(I),M=0,G=-1,$=new this(g);++G<I;)q(m[G],G);return $;function q(oe,ve){N.resolve(oe).then(Ee,function(ee){A||(A=!0,y.reject($,ee))});function Ee(ee){F[ve]=ee,++M===I&&!A&&(A=!0,y.resolve($,F))}}}p.race=Q;function Q(m){var N=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=m.length,A=!1;if(!I)return this.resolve([]);for(var F=-1,M=new this(g);++F<I;)G(m[F]);return M;function G($){N.resolve($).then(function(q){A||(A=!0,y.resolve(M,q))},function(q){A||(A=!0,y.reject(M,q))})}}},{1:1}],3:[function(a,u,l){(function(_){typeof _.Promise!="function"&&(_.Promise=a(2))}).call(this,typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(a,u,l){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function g(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function y(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var w=y();function x(){try{if(!w||!w.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function Y(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(o){if(o.name!=="TypeError")throw o;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,i=new t,s=0;s<e.length;s+=1)i.append(e[s]);return i.getBlob(n.type)}}typeof Promise>"u"&&a(3);var p=Promise;function S(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function B(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function C(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function H(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",W=void 0,U={},be=Object.prototype.toString,Q="readonly",m="readwrite";function N(e){for(var n=e.length,t=new ArrayBuffer(n),i=new Uint8Array(t),s=0;s<n;s++)i[s]=e.charCodeAt(s);return t}function I(e){return new p(function(n){var t=e.transaction(P,m),i=Y([""]);t.objectStore(P).put(i,"key"),t.onabort=function(s){s.preventDefault(),s.stopPropagation(),n(!1)},t.oncomplete=function(){var s=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);n(o||!s||parseInt(s[1],10)>=43)}}).catch(function(){return!1})}function A(e){return typeof W=="boolean"?p.resolve(W):I(e).then(function(n){return W=n,W})}function F(e){var n=U[e.name],t={};t.promise=new p(function(i,s){t.resolve=i,t.reject=s}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function M(e){var n=U[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function G(e,n){var t=U[e.name],i=t.deferredOperations.pop();if(i)return i.reject(n),i.promise}function $(e,n){return new p(function(t,i){if(U[e.name]=U[e.name]||Le(),e.db)if(n)F(e),e.db.close();else return t(e.db);var s=[e.name];n&&s.push(e.version);var o=w.open.apply(w,s);n&&(o.onupgradeneeded=function(f){var c=o.result;try{c.createObjectStore(e.storeName),f.oldVersion<=1&&c.createObjectStore(P)}catch(d){if(d.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+f.oldVersion+" to version "+f.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw d}}),o.onerror=function(f){f.preventDefault(),i(o.error)},o.onsuccess=function(){var f=o.result;f.onversionchange=function(c){c.target.close()},t(f),M(e)}})}function q(e){return $(e,!1)}function oe(e){return $(e,!0)}function ve(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),i=e.version<e.db.version,s=e.version>e.db.version;if(i&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),s||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function Ee(e){return new p(function(n,t){var i=new FileReader;i.onerror=t,i.onloadend=function(s){var o=btoa(s.target.result||"");n({__local_forage_encoded_blob:!0,data:o,type:e.type})},i.readAsBinaryString(e)})}function ee(e){var n=N(atob(e.data));return Y([n],{type:e.type})}function Oe(e){return e&&e.__local_forage_encoded_blob}function ut(e){var n=this,t=n._initReady().then(function(){var i=U[n._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return B(t,e,e),t}function ft(e){F(e);for(var n=U[e.name],t=n.forages,i=0;i<t.length;i++){var s=t[i];s._dbInfo.db&&(s._dbInfo.db.close(),s._dbInfo.db=null)}return e.db=null,q(e).then(function(o){return e.db=o,ve(e)?oe(e):o}).then(function(o){e.db=n.db=o;for(var f=0;f<t.length;f++)t[f]._dbInfo.db=o}).catch(function(o){throw G(e,o),o})}function j(e,n,t,i){i===void 0&&(i=1);try{var s=e.db.transaction(e.storeName,n);t(null,s)}catch(o){if(i>0&&(!e.db||o.name==="InvalidStateError"||o.name==="NotFoundError"))return p.resolve().then(function(){if(!e.db||o.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),oe(e)}).then(function(){return ft(e).then(function(){j(e,n,t,i-1)})}).catch(t);t(o)}}function Le(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ct(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var s=U[t.name];s||(s=Le(),U[t.name]=s),s.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=ut);var o=[];function f(){return p.resolve()}for(var c=0;c<s.forages.length;c++){var d=s.forages[c];d!==n&&o.push(d._initReady().catch(f))}var h=s.forages.slice(0);return p.all(o).then(function(){return t.db=s.db,q(t)}).then(function(v){return t.db=v,ve(t,n._defaultConfig.version)?oe(t):v}).then(function(v){t.db=s.db=v,n._dbInfo=t;for(var b=0;b<h.length;b++){var R=h[b];R!==n&&(R._dbInfo.db=t.db,R._dbInfo.version=t.version)}})}function lt(e,n){var t=this;e=C(e);var i=new p(function(s,o){t.ready().then(function(){j(t._dbInfo,Q,function(f,c){if(f)return o(f);try{var d=c.objectStore(t._dbInfo.storeName),h=d.get(e);h.onsuccess=function(){var v=h.result;v===void 0&&(v=null),Oe(v)&&(v=ee(v)),s(v)},h.onerror=function(){o(h.error)}}catch(v){o(v)}})}).catch(o)});return S(i,n),i}function dt(e,n){var t=this,i=new p(function(s,o){t.ready().then(function(){j(t._dbInfo,Q,function(f,c){if(f)return o(f);try{var d=c.objectStore(t._dbInfo.storeName),h=d.openCursor(),v=1;h.onsuccess=function(){var b=h.result;if(b){var R=b.value;Oe(R)&&(R=ee(R));var D=e(R,b.key,v++);D!==void 0?s(D):b.continue()}else s()},h.onerror=function(){o(h.error)}}catch(b){o(b)}})}).catch(o)});return S(i,n),i}function ht(e,n,t){var i=this;e=C(e);var s=new p(function(o,f){var c;i.ready().then(function(){return c=i._dbInfo,be.call(n)==="[object Blob]"?A(c.db).then(function(d){return d?n:Ee(n)}):n}).then(function(d){j(i._dbInfo,m,function(h,v){if(h)return f(h);try{var b=v.objectStore(i._dbInfo.storeName);d===null&&(d=void 0);var R=b.put(d,e);v.oncomplete=function(){d===void 0&&(d=null),o(d)},v.onabort=v.onerror=function(){var D=R.error?R.error:R.transaction.error;f(D)}}catch(D){f(D)}})}).catch(f)});return S(s,t),s}function vt(e,n){var t=this;e=C(e);var i=new p(function(s,o){t.ready().then(function(){j(t._dbInfo,m,function(f,c){if(f)return o(f);try{var d=c.objectStore(t._dbInfo.storeName),h=d.delete(e);c.oncomplete=function(){s()},c.onerror=function(){o(h.error)},c.onabort=function(){var v=h.error?h.error:h.transaction.error;o(v)}}catch(v){o(v)}})}).catch(o)});return S(i,n),i}function _t(e){var n=this,t=new p(function(i,s){n.ready().then(function(){j(n._dbInfo,m,function(o,f){if(o)return s(o);try{var c=f.objectStore(n._dbInfo.storeName),d=c.clear();f.oncomplete=function(){i()},f.onabort=f.onerror=function(){var h=d.error?d.error:d.transaction.error;s(h)}}catch(h){s(h)}})}).catch(s)});return S(t,e),t}function pt(e){var n=this,t=new p(function(i,s){n.ready().then(function(){j(n._dbInfo,Q,function(o,f){if(o)return s(o);try{var c=f.objectStore(n._dbInfo.storeName),d=c.count();d.onsuccess=function(){i(d.result)},d.onerror=function(){s(d.error)}}catch(h){s(h)}})}).catch(s)});return S(t,e),t}function mt(e,n){var t=this,i=new p(function(s,o){if(e<0){s(null);return}t.ready().then(function(){j(t._dbInfo,Q,function(f,c){if(f)return o(f);try{var d=c.objectStore(t._dbInfo.storeName),h=!1,v=d.openKeyCursor();v.onsuccess=function(){var b=v.result;if(!b){s(null);return}e===0||h?s(b.key):(h=!0,b.advance(e))},v.onerror=function(){o(v.error)}}catch(b){o(b)}})}).catch(o)});return S(i,n),i}function gt(e){var n=this,t=new p(function(i,s){n.ready().then(function(){j(n._dbInfo,Q,function(o,f){if(o)return s(o);try{var c=f.objectStore(n._dbInfo.storeName),d=c.openKeyCursor(),h=[];d.onsuccess=function(){var v=d.result;if(!v){i(h);return}h.push(v.key),v.continue()},d.onerror=function(){s(d.error)}}catch(v){s(v)}})}).catch(s)});return S(t,e),t}function yt(e,n){n=H.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,s;if(!e.name)s=p.reject("Invalid arguments");else{var o=e.name===t.name&&i._dbInfo.db,f=o?p.resolve(i._dbInfo.db):q(e).then(function(c){var d=U[e.name],h=d.forages;d.db=c;for(var v=0;v<h.length;v++)h[v]._dbInfo.db=c;return c});e.storeName?s=f.then(function(c){if(c.objectStoreNames.contains(e.storeName)){var d=c.version+1;F(e);var h=U[e.name],v=h.forages;c.close();for(var b=0;b<v.length;b++){var R=v[b];R._dbInfo.db=null,R._dbInfo.version=d}var D=new p(function(T,L){var O=w.open(e.name,d);O.onerror=function(z){var ae=O.result;ae.close(),L(z)},O.onupgradeneeded=function(){var z=O.result;z.deleteObjectStore(e.storeName)},O.onsuccess=function(){var z=O.result;z.close(),T(z)}});return D.then(function(T){h.db=T;for(var L=0;L<v.length;L++){var O=v[L];O._dbInfo.db=T,M(O._dbInfo)}}).catch(function(T){throw(G(e,T)||p.resolve()).catch(function(){}),T})}}):s=f.then(function(c){F(e);var d=U[e.name],h=d.forages;c.close();for(var v=0;v<h.length;v++){var b=h[v];b._dbInfo.db=null}var R=new p(function(D,T){var L=w.deleteDatabase(e.name);L.onerror=function(){var O=L.result;O&&O.close(),T(L.error)},L.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},L.onsuccess=function(){var O=L.result;O&&O.close(),D(O)}});return R.then(function(D){d.db=D;for(var T=0;T<h.length;T++){var L=h[T];M(L._dbInfo)}}).catch(function(D){throw(G(e,D)||p.resolve()).catch(function(){}),D})})}return S(s,n),s}var bt={_driver:"asyncStorage",_initStorage:ct,_support:x(),iterate:dt,getItem:lt,setItem:ht,removeItem:vt,clear:_t,length:pt,key:mt,keys:gt,dropInstance:yt};function Et(){return typeof openDatabase=="function"}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",St="~~local_forage_type~",Pe=/^~~local_forage_type~([^~]+)~/,_e="__lfsc__:",Se=_e.length,Re="arbf",we="blob",Ue="si08",Fe="ui08",Ye="uic8",He="si16",Me="si32",ke="ur16",Ge="ui32",$e="fl32",ze="fl64",We=Se+Re.length,qe=Object.prototype.toString;function je(e){var n=e.length*.75,t=e.length,i,s=0,o,f,c,d;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var h=new ArrayBuffer(n),v=new Uint8Array(h);for(i=0;i<t;i+=4)o=X.indexOf(e[i]),f=X.indexOf(e[i+1]),c=X.indexOf(e[i+2]),d=X.indexOf(e[i+3]),v[s++]=o<<2|f>>4,v[s++]=(f&15)<<4|c>>2,v[s++]=(c&3)<<6|d&63;return h}function Ie(e){var n=new Uint8Array(e),t="",i;for(i=0;i<n.length;i+=3)t+=X[n[i]>>2],t+=X[(n[i]&3)<<4|n[i+1]>>4],t+=X[(n[i+1]&15)<<2|n[i+2]>>6],t+=X[n[i+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Rt(e,n){var t="";if(e&&(t=qe.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&qe.call(e.buffer)==="[object ArrayBuffer]")){var i,s=_e;e instanceof ArrayBuffer?(i=e,s+=Re):(i=e.buffer,t==="[object Int8Array]"?s+=Ue:t==="[object Uint8Array]"?s+=Fe:t==="[object Uint8ClampedArray]"?s+=Ye:t==="[object Int16Array]"?s+=He:t==="[object Uint16Array]"?s+=ke:t==="[object Int32Array]"?s+=Me:t==="[object Uint32Array]"?s+=Ge:t==="[object Float32Array]"?s+=$e:t==="[object Float64Array]"?s+=ze:n(new Error("Failed to get type for BinaryArray"))),n(s+Ie(i))}else if(t==="[object Blob]"){var o=new FileReader;o.onload=function(){var f=St+e.type+"~"+Ie(this.result);n(_e+we+f)},o.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(f){console.error("Couldn't convert value into a JSON string: ",e),n(null,f)}}function wt(e){if(e.substring(0,Se)!==_e)return JSON.parse(e);var n=e.substring(We),t=e.substring(Se,We),i;if(t===we&&Pe.test(n)){var s=n.match(Pe);i=s[1],n=n.substring(s[0].length)}var o=je(n);switch(t){case Re:return o;case we:return Y([o],{type:i});case Ue:return new Int8Array(o);case Fe:return new Uint8Array(o);case Ye:return new Uint8ClampedArray(o);case He:return new Int16Array(o);case ke:return new Uint16Array(o);case Me:return new Int32Array(o);case Ge:return new Uint32Array(o);case $e:return new Float32Array(o);case ze:return new Float64Array(o);default:throw new Error("Unkown type: "+t)}}var xe={serialize:Rt,deserialize:wt,stringToBuffer:je,bufferToString:Ie};function Xe(e,n,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function It(e){var n=this,t={db:null};if(e)for(var i in e)t[i]=typeof e[i]!="string"?e[i].toString():e[i];var s=new p(function(o,f){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(c){return f(c)}t.db.transaction(function(c){Xe(c,t,function(){n._dbInfo=t,o()},function(d,h){f(h)})},f)});return t.serializer=xe,s}function J(e,n,t,i,s,o){e.executeSql(t,i,s,function(f,c){c.code===c.SYNTAX_ERR?f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(d,h){h.rows.length?o(d,c):Xe(d,n,function(){d.executeSql(t,i,s,o)},o)},o):o(f,c)},o)}function xt(e,n){var t=this;e=C(e);var i=new p(function(s,o){t.ready().then(function(){var f=t._dbInfo;f.db.transaction(function(c){J(c,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[e],function(d,h){var v=h.rows.length?h.rows.item(0).value:null;v&&(v=f.serializer.deserialize(v)),s(v)},function(d,h){o(h)})})}).catch(o)});return S(i,n),i}function Nt(e,n){var t=this,i=new p(function(s,o){t.ready().then(function(){var f=t._dbInfo;f.db.transaction(function(c){J(c,f,"SELECT * FROM "+f.storeName,[],function(d,h){for(var v=h.rows,b=v.length,R=0;R<b;R++){var D=v.item(R),T=D.value;if(T&&(T=f.serializer.deserialize(T)),T=e(T,D.key,R+1),T!==void 0){s(T);return}}s()},function(d,h){o(h)})})}).catch(o)});return S(i,n),i}function Je(e,n,t,i){var s=this;e=C(e);var o=new p(function(f,c){s.ready().then(function(){n===void 0&&(n=null);var d=n,h=s._dbInfo;h.serializer.serialize(n,function(v,b){b?c(b):h.db.transaction(function(R){J(R,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,v],function(){f(d)},function(D,T){c(T)})},function(R){if(R.code===R.QUOTA_ERR){if(i>0){f(Je.apply(s,[e,d,t,i-1]));return}c(R)}})})}).catch(c)});return S(o,t),o}function Dt(e,n,t){return Je.apply(this,[e,n,t,1])}function Tt(e,n){var t=this;e=C(e);var i=new p(function(s,o){t.ready().then(function(){var f=t._dbInfo;f.db.transaction(function(c){J(c,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[e],function(){s()},function(d,h){o(h)})})}).catch(o)});return S(i,n),i}function At(e){var n=this,t=new p(function(i,s){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(f){J(f,o,"DELETE FROM "+o.storeName,[],function(){i()},function(c,d){s(d)})})}).catch(s)});return S(t,e),t}function Bt(e){var n=this,t=new p(function(i,s){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(f){J(f,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],function(c,d){var h=d.rows.item(0).c;i(h)},function(c,d){s(d)})})}).catch(s)});return S(t,e),t}function Ct(e,n){var t=this,i=new p(function(s,o){t.ready().then(function(){var f=t._dbInfo;f.db.transaction(function(c){J(c,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[e+1],function(d,h){var v=h.rows.length?h.rows.item(0).key:null;s(v)},function(d,h){o(h)})})}).catch(o)});return S(i,n),i}function Ot(e){var n=this,t=new p(function(i,s){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(f){J(f,o,"SELECT key FROM "+o.storeName,[],function(c,d){for(var h=[],v=0;v<d.rows.length;v++)h.push(d.rows.item(v).key);i(h)},function(c,d){s(d)})})}).catch(s)});return S(t,e),t}function Lt(e){return new p(function(n,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(s,o){for(var f=[],c=0;c<o.rows.length;c++)f.push(o.rows.item(c).name);n({db:e,storeNames:f})},function(s,o){t(o)})},function(i){t(i)})})}function Pt(e,n){n=H.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var i=this,s;return e.name?s=new p(function(o){var f;e.name===t.name?f=i._dbInfo.db:f=openDatabase(e.name,"","",0),e.storeName?o({db:f,storeNames:[e.storeName]}):o(Lt(f))}).then(function(o){return new p(function(f,c){o.db.transaction(function(d){function h(D){return new p(function(T,L){d.executeSql("DROP TABLE IF EXISTS "+D,[],function(){T()},function(O,z){L(z)})})}for(var v=[],b=0,R=o.storeNames.length;b<R;b++)v.push(h(o.storeNames[b]));p.all(v).then(function(){f()}).catch(function(D){c(D)})},function(d){c(d)})})}):s=p.reject("Invalid arguments"),S(s,n),s}var Ut={_driver:"webSQLStorage",_initStorage:It,_support:Et(),iterate:Nt,getItem:xt,setItem:Dt,removeItem:Tt,clear:At,length:Bt,key:Ct,keys:Ot,dropInstance:Pt};function Ft(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ke(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Yt(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Ht(){return!Yt()||localStorage.length>0}function Mt(e){var n=this,t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=Ke(e,n._defaultConfig),Ht()?(n._dbInfo=t,t.serializer=xe,p.resolve()):p.reject()}function kt(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo.keyPrefix,s=localStorage.length-1;s>=0;s--){var o=localStorage.key(s);o.indexOf(i)===0&&localStorage.removeItem(o)}});return S(t,e),t}function Gt(e,n){var t=this;e=C(e);var i=t.ready().then(function(){var s=t._dbInfo,o=localStorage.getItem(s.keyPrefix+e);return o&&(o=s.serializer.deserialize(o)),o});return S(i,n),i}function $t(e,n){var t=this,i=t.ready().then(function(){for(var s=t._dbInfo,o=s.keyPrefix,f=o.length,c=localStorage.length,d=1,h=0;h<c;h++){var v=localStorage.key(h);if(v.indexOf(o)===0){var b=localStorage.getItem(v);if(b&&(b=s.serializer.deserialize(b)),b=e(b,v.substring(f),d++),b!==void 0)return b}}});return S(i,n),i}function zt(e,n){var t=this,i=t.ready().then(function(){var s=t._dbInfo,o;try{o=localStorage.key(e)}catch{o=null}return o&&(o=o.substring(s.keyPrefix.length)),o});return S(i,n),i}function Wt(e){var n=this,t=n.ready().then(function(){for(var i=n._dbInfo,s=localStorage.length,o=[],f=0;f<s;f++){var c=localStorage.key(f);c.indexOf(i.keyPrefix)===0&&o.push(c.substring(i.keyPrefix.length))}return o});return S(t,e),t}function qt(e){var n=this,t=n.keys().then(function(i){return i.length});return S(t,e),t}function jt(e,n){var t=this;e=C(e);var i=t.ready().then(function(){var s=t._dbInfo;localStorage.removeItem(s.keyPrefix+e)});return S(i,n),i}function Xt(e,n,t){var i=this;e=C(e);var s=i.ready().then(function(){n===void 0&&(n=null);var o=n;return new p(function(f,c){var d=i._dbInfo;d.serializer.serialize(n,function(h,v){if(v)c(v);else try{localStorage.setItem(d.keyPrefix+e,h),f(o)}catch(b){(b.name==="QuotaExceededError"||b.name==="NS_ERROR_DOM_QUOTA_REACHED")&&c(b),c(b)}})})});return S(s,t),s}function Jt(e,n){if(n=H.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var i=this,s;return e.name?s=new p(function(o){e.storeName?o(Ke(e,i._defaultConfig)):o(e.name+"/")}).then(function(o){for(var f=localStorage.length-1;f>=0;f--){var c=localStorage.key(f);c.indexOf(o)===0&&localStorage.removeItem(c)}}):s=p.reject("Invalid arguments"),S(s,n),s}var Kt={_driver:"localStorageWrapper",_initStorage:Mt,_support:Ft(),iterate:$t,getItem:Gt,setItem:Xt,removeItem:jt,clear:kt,length:qt,key:zt,keys:Wt,dropInstance:Jt},Vt=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Qt=function(n,t){for(var i=n.length,s=0;s<i;){if(Vt(n[s],t))return!0;s++}return!1},Ve=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ie={},Qe={},te={INDEXEDDB:bt,WEBSQL:Ut,LOCALSTORAGE:Kt},Zt=[te.INDEXEDDB._driver,te.WEBSQL._driver,te.LOCALSTORAGE._driver],pe=["dropInstance"],Ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(pe),en={description:"",driver:Zt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function tn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function De(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(Ve(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var nn=function(){function e(n){g(this,e);for(var t in te)if(te.hasOwnProperty(t)){var i=te[t],s=i._driver;this[t]=s,ie[s]||this.defineDriver(i)}this._defaultConfig=De({},en),this._config=De({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":_(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if(i==="storeName"&&(t[i]=t[i].replace(/\W/g,"_")),i==="version"&&typeof t[i]!="number")return new Error("Database version must be a number.");this._config[i]=t[i]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,s){var o=new p(function(f,c){try{var d=t._driver,h=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){c(h);return}for(var v=Ne.concat("_initStorage"),b=0,R=v.length;b<R;b++){var D=v[b],T=!Qt(pe,D);if((T||t[D])&&typeof t[D]!="function"){c(h);return}}var L=function(){for(var ae=function(an){return function(){var sn=new Error("Method "+an+" is not implemented by the current driver"),Ze=p.reject(sn);return S(Ze,arguments[arguments.length-1]),Ze}},Te=0,on=pe.length;Te<on;Te++){var Ae=pe[Te];t[Ae]||(t[Ae]=ae(Ae))}};L();var O=function(ae){ie[d]&&console.info("Redefining LocalForage driver: "+d),ie[d]=t,Qe[d]=ae,f()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(O,c):O(!!t._support):O(!0)}catch(z){c(z)}});return B(o,i,s),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,s){var o=ie[t]?p.resolve(ie[t]):p.reject(new Error("Driver not found."));return B(o,i,s),o},e.prototype.getSerializer=function(t){var i=p.resolve(xe);return B(i,t),i},e.prototype.ready=function(t){var i=this,s=i._driverSet.then(function(){return i._ready===null&&(i._ready=i._initDriver()),i._ready});return B(s,t,t),s},e.prototype.setDriver=function(t,i,s){var o=this;Ve(t)||(t=[t]);var f=this._getSupportedDrivers(t);function c(){o._config.driver=o.driver()}function d(b){return o._extend(b),c(),o._ready=o._initStorage(o._config),o._ready}function h(b){return function(){var R=0;function D(){for(;R<b.length;){var T=b[R];return R++,o._dbInfo=null,o._ready=null,o.getDriver(T).then(d).catch(D)}c();var L=new Error("No available storage method found.");return o._driverSet=p.reject(L),o._driverSet}return D()}}var v=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=v.then(function(){var b=f[0];return o._dbInfo=null,o._ready=null,o.getDriver(b).then(function(R){o._driver=R._driver,c(),o._wrapLibraryMethodsWithReady(),o._initDriver=h(f)})}).catch(function(){c();var b=new Error("No available storage method found.");return o._driverSet=p.reject(b),o._driverSet}),B(this._driverSet,i,s),this._driverSet},e.prototype.supports=function(t){return!!Qe[t]},e.prototype._extend=function(t){De(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],s=0,o=t.length;s<o;s++){var f=t[s];this.supports(f)&&i.push(f)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Ne.length;t<i;t++)tn(this,Ne[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),rn=new nn;u.exports=rn},{3:3}]},{},[4])(4)})})(In);const K=V;class le{static __initStatic(){this.id="Offline"}__init(){this.name=le.id}constructor(r={}){le.prototype.__init.call(this),this.maxStoredEvents=r.maxStoredEvents||30,this.offlineEventStore=Ce.createInstance({name:"sentry/offlineEventStore"})}setupOnce(r,a){this.hub=a(),"addEventListener"in K&&K.addEventListener("online",()=>{this._sendEvents().catch(()=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("could not send cached events")})});const u=l=>this.hub&&this.hub.getIntegration(le)&&"navigator"in K&&"onLine"in K.navigator&&!K.navigator.onLine?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.log("Event dropped due to being a offline - caching instead"),this._cacheEvent(l).then(_=>this._enforceMaxEvents()).catch(_=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("could not cache event while offline")}),null):l;u.id=this.name,r(u),"navigator"in K&&"onLine"in K.navigator&&K.navigator.onLine&&this._sendEvents().catch(()=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("could not send cached events")})}async _cacheEvent(r){return this.offlineEventStore.setItem(dn(),it(r))}async _enforceMaxEvents(){const r=[];return this.offlineEventStore.iterate((a,u,l)=>{r.push({cacheKey:u,event:a})}).then(()=>this._purgeEvents(r.sort((a,u)=>(u.event.timestamp||0)-(a.event.timestamp||0)).slice(this.maxStoredEvents<r.length?this.maxStoredEvents:r.length).map(a=>a.cacheKey))).catch(a=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("could not enforce max events")})}async _purgeEvent(r){return this.offlineEventStore.removeItem(r)}async _purgeEvents(r){return Promise.all(r.map(a=>this._purgeEvent(a))).then()}async _sendEvents(){return this.offlineEventStore.iterate((r,a,u)=>{this.hub?(this.hub.captureEvent(r),this._purgeEvent(a).catch(l=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("could not purge event from cache")})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("no hub found - could not send cached event")})}}le.__initStatic();const xn=V;class de{static __initStatic(){this.id="ReportingObserver"}__init(){this.name=de.id}constructor(r={types:["crash","deprecation","intervention"]}){this._options=r,de.prototype.__init.call(this)}setupOnce(r,a){if(!hn())return;this._getCurrentHub=a,new xn.ReportingObserver(this.handler.bind(this),{buffered:!0,types:this._options.types}).observe()}handler(r){const a=this._getCurrentHub&&this._getCurrentHub();if(!(!a||!a.getIntegration(de)))for(const u of r)a.withScope(l=>{l.setExtra("url",u.url);const _=`ReportingObserver [${u.type}]`;let g="No details available";if(u.body){const y={};for(const w in u.body)y[w]=u.body[w];if(l.setExtra("body",y),u.type==="crash"){const w=u.body;g=[w.crashId||"",w.reason||""].join(" ").trim()||g}else g=u.body.message||g}a.captureMessage(`${_}: ${g}`)})}}de.__initStatic();class Z{static __initStatic(){this.id="RewriteFrames"}__init(){this.name=Z.id}__init2(){this._prefix="app:///"}constructor(r={}){Z.prototype.__init.call(this),Z.prototype.__init2.call(this),Z.prototype.__init3.call(this),r.root&&(this._root=r.root),r.prefix&&(this._prefix=r.prefix),r.iteratee&&(this._iteratee=r.iteratee)}setupOnce(r,a){r(u=>{const l=a().getIntegration(Z);return l?l.process(u):u})}process(r){let a=r;return r.exception&&Array.isArray(r.exception.values)&&(a=this._processExceptionsEvent(a)),a}__init3(){this._iteratee=r=>{if(!r.filename)return r;const a=/^[A-Z]:\\/.test(r.filename),u=/^\//.test(r.filename);if(a||u){const l=a?r.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):r.filename,_=this._root?bn(this._root,l):En(l);r.filename=`${this._prefix}${_}`}return r}}_processExceptionsEvent(r){try{return{...r,exception:{...r.exception,values:r.exception.values.map(a=>({...a,...a.stacktrace&&{stacktrace:this._processStacktrace(a.stacktrace)}}))}}}catch{return r}}_processStacktrace(r){return{...r,frames:r&&r.frames&&r.frames.map(a=>this._iteratee(a))}}}Z.__initStatic();class re{constructor(){re.prototype.__init.call(this),re.prototype.__init2.call(this)}static __initStatic(){this.id="SessionTiming"}__init(){this.name=re.id}__init2(){this._startTime=Date.now()}setupOnce(r,a){r(u=>{const l=a().getIntegration(re);return l?l.process(u):u})}process(r){const a=Date.now();return{...r,extra:{...r.extra,["session:start"]:this._startTime,["session:duration"]:a-this._startTime,["session:end"]:a}}}}re.__initStatic();class he{constructor(){he.prototype.__init.call(this)}static __initStatic(){this.id="Transaction"}__init(){this.name=he.id}setupOnce(r,a){r(u=>{const l=a().getIntegration(he);return l?l.process(u):u})}process(r){const a=this._getFramesFromEvent(r);for(let u=a.length-1;u>=0;u--){const l=a[u];if(l.in_app===!0){r.transaction=this._getTransaction(l);break}}return r}_getFramesFromEvent(r){const a=r.exception&&r.exception.values&&r.exception.values[0];return a&&a.stacktrace&&a.stacktrace.frames||[]}_getTransaction(r){return r.module||r.function?`${r.module||"?"}/${r.function||"?"}`:"<unknown>"}}he.__initStatic();class ye{static __initStatic(){this.id="HttpClient"}__init(){this.name=ye.id}constructor(r){ye.prototype.__init.call(this),this._options={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...r}}setupOnce(r,a){this._getCurrentHub=a,this._wrapFetch(),this._wrapXHR()}_fetchResponseHandler(r,a,u){if(this._getCurrentHub&&this._shouldCaptureResponse(a.status,a.url)){const l=new Request(r,u),_=this._getCurrentHub();let g,y,w,x;_.shouldSendDefaultPii()&&([{headers:g,cookies:w},{headers:y,cookies:x}]=[{cookieHeader:"Cookie",obj:l},{cookieHeader:"Set-Cookie",obj:a}].map(({cookieHeader:p,obj:S})=>{const B=this._extractFetchHeaders(S.headers);let C;try{const H=B[p]||B[p.toLowerCase()]||void 0;H&&(C=this._parseCookieString(H))}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.log(`Could not extract cookies from header ${p}`)}return{headers:B,cookies:C}}));const Y=this._createEvent({url:l.url,method:l.method,status:a.status,requestHeaders:g,responseHeaders:y,requestCookies:w,responseCookies:x});_.captureEvent(Y)}}_xhrResponseHandler(r,a,u){if(this._getCurrentHub&&this._shouldCaptureResponse(r.status,r.responseURL)){let l,_,g;const y=this._getCurrentHub();if(y.shouldSendDefaultPii()){try{const x=r.getResponseHeader("Set-Cookie")||r.getResponseHeader("set-cookie")||void 0;x&&(_=this._parseCookieString(x))}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.log("Could not extract cookies from response headers")}try{g=this._getXHRResponseHeaders(r)}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.log("Could not extract headers from response")}l=u}const w=this._createEvent({url:r.responseURL,method:a,status:r.status,requestHeaders:l,responseHeaders:g,responseCookies:_});y.captureEvent(w)}}_getResponseSizeFromHeaders(r){if(r){const a=r["Content-Length"]||r["content-length"];if(a)return parseInt(a,10)}}_parseCookieString(r){return r.split("; ").reduce((a,u)=>{const[l,_]=u.split("=");return a[l]=_,a},{})}_extractFetchHeaders(r){const a={};return r.forEach((u,l)=>{a[l]=u}),a}_getXHRResponseHeaders(r){const a=r.getAllResponseHeaders();return a?a.split(`\r
`).reduce((u,l)=>{const[_,g]=l.split(": ");return u[_]=g,u},{}):{}}_isInGivenRequestTargets(r){return this._options.failedRequestTargets?this._options.failedRequestTargets.some(a=>typeof a=="string"?r.includes(a):a.test(r)):!1}_isInGivenStatusRanges(r){return this._options.failedRequestStatusCodes?this._options.failedRequestStatusCodes.some(a=>typeof a=="number"?a===r:r>=a[0]&&r<=a[1]):!1}_wrapFetch(){if(!vn())return;const r=this;se(V,"fetch",function(a){return function(...u){const[l,_]=u,g=a.apply(this,u);return g.then(y=>(r._fetchResponseHandler(l,y,_),y)).catch(y=>{throw y}),g}})}_wrapXHR(){if(!("XMLHttpRequest"in V))return;const r=this;se(XMLHttpRequest.prototype,"open",function(a){return function(...u){const l=this,_=u[0],g={};return se(l,"setRequestHeader",function(y){return function(...w){const[x,Y]=w;return g[x]=Y,y.apply(l,w)}}),se(l,"onloadend",function(y){return function(...w){try{r._xhrResponseHandler(l,_,g)}catch(x){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&k.warn("Error while extracting response event form XHR response",x)}if(y)return y.apply(l,w)}}),a.apply(this,u)}})}_isSentryRequest(r){const a=this._getCurrentHub&&this._getCurrentHub().getClient();if(!a)return!1;const u=a.getDsn();return u?r.includes(u.host):!1}_shouldCaptureResponse(r,a){return this._isInGivenStatusRanges(r)&&this._isInGivenRequestTargets(a)&&!this._isSentryRequest(a)}_createEvent(r){const a=`HTTP Client Error with status code: ${r.status}`,u={message:a,exception:{values:[{type:"Error",value:a}]},request:{url:r.url,method:r.method,headers:r.requestHeaders,cookies:r.requestCookies},contexts:{response:{status_code:r.status,headers:r.responseHeaders,cookies:r.responseCookies,body_size:this._getResponseSizeFromHeaders(r.responseHeaders)}}};return _n(u,{type:"http.client"}),u}}ye.__initStatic();export{ne as CaptureConsole,ue as Debug,fe as Dedupe,ce as ExtraErrorData,ye as HttpClient,le as Offline,de as ReportingObserver,Z as RewriteFrames,re as SessionTiming,he as Transaction};
